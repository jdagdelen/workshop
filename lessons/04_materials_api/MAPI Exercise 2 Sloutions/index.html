<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Lessons for the Materials Project Workshop"><link href=https://workshop.materialsproject.org/lessons/04_materials_api/MAPI%20Exercise%202%20Sloutions/ rel=canonical><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.5.0"><title>MAPI Exercise 2 Sloutions - The Materials Project Workshop</title><link rel=stylesheet href=../../../assets/stylesheets/main.b5d04df8.min.css><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../../workshop.css><link rel=stylesheet href=../../../css/ansi-colours.css><link rel=stylesheet href=../../../css/jupyter-cells.css><link rel=stylesheet href=../../../css/pandas-dataframe.css></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#materials-api-exercise-2-using-the-mprester-and-pymatgen-to-find-materials-with-exotic-mechanical-properties class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://workshop.materialsproject.org title="The Materials Project Workshop" class="md-header-nav__button md-logo" aria-label="The Materials Project Workshop"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 2l-5 4.5v11l5-4.5V2M6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> The Materials Project Workshop </span> <span class="md-header-nav__topic md-ellipsis"> MAPI Exercise 2 Sloutions </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/materialsproject/workshop/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://workshop.materialsproject.org title="The Materials Project Workshop" class="md-nav__button md-logo" aria-label="The Materials Project Workshop"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 2l-5 4.5v11l5-4.5V2M6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5z"/></svg> </a> The Materials Project Workshop </label> <div class=md-nav__source> <a href=https://github.com/materialsproject/workshop/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. title=Home class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../../logistics/logistics/ title=Logistics class=md-nav__link> Logistics </a> </li> <li class=md-nav__item> <a href=../../../people/people/ title=People class=md-nav__link> People </a> </li> <li class=md-nav__item> <a href=../../../code_of_conduct/ title="Code of Conduct" class=md-nav__link> Code of Conduct </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Primer <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Primer data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Primer </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../primer/01_basic_python/0%20-%20Introduction%20and%20Jupyter%20Use/ title=Intro class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../../../primer/01_basic_python/1%20-%20Python%20Primer/ title="Basic Python" class=md-nav__link> Basic Python </a> </li> <li class=md-nav__item> <a href=../../../primer/02_building_logic/2%20-%20Python%20Primer%20-%20Part%20II/ title="Advanced Python" class=md-nav__link> Advanced Python </a> </li> <li class=md-nav__item> <a href=../../../primer/03_MongoDB_part1/lessons/ title="Intro to MongoDB" class=md-nav__link> Intro to MongoDB </a> </li> <li class=md-nav__item> <a href=../../../primer/04_MongoDB_part2/lesson/ title="Advanced MongoDB" class=md-nav__link> Advanced MongoDB </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Workshop <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Workshop data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Workshop </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../01_website_walkthrough/website_walkthrough/ title="The Materials Project Website" class=md-nav__link> The Materials Project Website </a> </li> <li class=md-nav__item> <a href=../../02_intro_pymatgen/1%20-%20pymatgen%20foundations/ title="Intro to Pymatgen" class=md-nav__link> Intro to Pymatgen </a> </li> <li class=md-nav__item> <a href=../../03_surfaces/Working%20With%20Surfaces_lesson/ title="Working with Surfaces" class=md-nav__link> Working with Surfaces </a> </li> <li class=md-nav__item> <a href=../api_use/ title="The Materials API" class=md-nav__link> The Materials API </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#step-1-retrieve-the-structure-of-alphaalpha-cristobalite class=md-nav__link> Step 1: Retrieve the structure of \alpha\alpha-cristobalite </a> </li> <li class=md-nav__item> <a href=#step-2-build-a-structure-comparison-engine-and-test-it-out class=md-nav__link> Step 2: Build a structure comparison engine and test it out </a> </li> <li class=md-nav__item> <a href=#step-3-get-a-set-of-candidate-structures-to-compare class=md-nav__link> Step 3: Get a set of candidate structures to compare </a> </li> <li class=md-nav__item> <a href=#step-4-screen-the-vanadates-for-similar-structures-to-alphaalpha-cristobalite-and-then-check-if-our-hypothesis-is-valid-by-querying-for-their-poissons-ratios class=md-nav__link> Step 4: Screen the vanadates for similar structures to \alpha\alpha-cristobalite and then check if our hypothesis is valid by querying for their Poisson's ratios. </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href="https://github.com/materialsproject/workshop/edit/master/docs/lessons/04_materials_api/MAPI Exercise 2 Sloutions.ipynb" title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <script src=https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js></script> <script>
(function() {
  function addWidgetsRenderer() {
    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var scriptElement = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    scriptElement.src = widgetRendererSrc;
    document.body.appendChild(scriptElement);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h1 id=materials-api-exercise-2-using-the-mprester-and-pymatgen-to-find-materials-with-exotic-mechanical-properties>Materials API - Exercise 2: Using the MPRester and Pymatgen to Find Materials With Exotic Mechanical Properties<a class=headerlink href=#materials-api-exercise-2-using-the-mprester-and-pymatgen-to-find-materials-with-exotic-mechanical-properties title="Permanent link">&para;</a></h1> <p>The tetragonal SiO<span><span class=MathJax_Preview>_2</span><script type=math/tex>_2</script></span> polymorph <span><span class=MathJax_Preview>\alpha</span><script type=math/tex>\alpha</script></span>-cristobalite is one of the very few crystalline materials known to have a negative average Poisson's ratio, which means that its cross-section expands under tensile strain rather than contracting. This property can be extremely useful in a variety of applications such as scratch-resistant coatings and high-toughness ceramics. </p> <p>Why does <span><span class=MathJax_Preview>\alpha</span><script type=math/tex>\alpha</script></span>-cristobalite exhibit this property while other materials do not? The prevailing hypothesis is that <span><span class=MathJax_Preview>\alpha</span><script type=math/tex>\alpha</script></span>-cristobalite's negative Poisson's ratio is a result of its crystal structure. If that's the case, then perhaps we can find other materials with this exotic property by looking for materials with similar structures and then calculating their Poisson's ratios. </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h2 id=step-1-retrieve-the-structure-of-alphaalpha-cristobalite>Step 1: Retrieve the structure of <span><span class=MathJax_Preview>\alpha</span><script type=math/tex>\alpha</script></span>-cristobalite<a class=headerlink href=#step-1-retrieve-the-structure-of-alphaalpha-cristobalite title="Permanent link">&para;</a></h2> <p>First, we should find the ground state structure for <span><span class=MathJax_Preview>\alpha</span><script type=math/tex>\alpha</script></span>-cristobalite, which has the spacegroup <span><span class=MathJax_Preview>P4_12_12</span><script type=math/tex>P4_12_12</script></span> [92]. Remember, stable materials have <em>low</em> energy above hull (<code>e_above_hull</code>).</p> <p><em>Hint: Query for the formula and spacegroup for the desired compound and then select the one with the lowest e_above_hull if there are multiple results.</em> </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Your code here</span>
<span class=kn>from</span> <span class=nn>pymatgen</span> <span class=kn>import</span> <span class=n>MPRester</span>

<span class=k>with</span> <span class=n>MPRester</span><span class=p>(</span><span class=s2>&quot;9LO7vrUFbVTMaxdK&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>mpr</span><span class=p>:</span>
    <span class=n>ac</span> <span class=o>=</span> <span class=n>mpr</span><span class=o>.</span><span class=n>query</span><span class=p>({</span><span class=s2>&quot;spacegroup.number&quot;</span><span class=p>:</span> <span class=mi>92</span><span class=p>,</span> 
                              <span class=s2>&quot;pretty_formula&quot;</span><span class=p>:</span> <span class=s2>&quot;SiO2&quot;</span><span class=p>,</span> 
                              <span class=s2>&quot;e_above_hull&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;$lt&quot;</span><span class=p>:</span> <span class=mf>0.1</span><span class=p>}},</span> 
                             <span class=p>[</span><span class=s2>&quot;material_id&quot;</span><span class=p>,</span> <span class=s2>&quot;structure&quot;</span><span class=p>])[</span><span class=mi>0</span><span class=p>]</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=n>ac_structure</span> <span class=o>=</span> <span class=n>ac</span><span class=p>[</span><span class=s2>&quot;structure&quot;</span><span class=p>]</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h2 id=step-2-build-a-structure-comparison-engine-and-test-it-out>Step 2: Build a structure comparison engine and test it out<a class=headerlink href=#step-2-build-a-structure-comparison-engine-and-test-it-out title="Permanent link">&para;</a></h2> <p>The code below creates a structure matcher object that can be used to compare if two structures are simlar (loose tolerances = similar, tight tolerances = identical). Please verify that the structure matcher works for identical structure by comparing the structure of AC with itself. </p> <p><em>Hint: Replace <your code here> with the two structures you want to compare, separated by a comma.</em> </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1>##### Don&#39;t edit code below #####</span>

<span class=kn>from</span> <span class=nn>pymatgen.analysis.structure_matcher</span> <span class=kn>import</span> <span class=n>StructureMatcher</span>
<span class=kn>from</span> <span class=nn>pymatgen.analysis.structure_matcher</span> <span class=kn>import</span> <span class=n>FrameworkComparator</span>
<span class=c1># This line initializes our comparator. Please don&#39;t play with its tolerances until after you are done</span>
<span class=n>comparison_engine</span> <span class=o>=</span> <span class=n>StructureMatcher</span><span class=p>(</span><span class=n>ltol</span><span class=o>=.</span><span class=mi>2</span><span class=p>,</span> <span class=n>stol</span><span class=o>=.</span><span class=mi>5</span><span class=p>,</span> <span class=n>angle_tol</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>primitive_cell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> 
                                     <span class=n>scale</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>attempt_supercell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> 
                                     <span class=n>comparator</span><span class=o>=</span><span class=n>FrameworkComparator</span><span class=p>())</span>
<span class=c1>##### Don&#39;t edit code above #####</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=nb>print</span><span class=p>(</span><span class=n>comparison_engine</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>ac_structure</span><span class=p>,</span> <span class=n>ac_structure</span><span class=p>))</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>True
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> We know that the high-temperature phase of cristobalite, <span><span class=MathJax_Preview>\beta</span><script type=math/tex>\beta</script></span>-cristobalite <a href=https://materialsproject.org/materials/mp-546794/ >(mp-546794)</a>, has a very similar structure to <span><span class=MathJax_Preview>\alpha</span><script type=math/tex>\alpha</script></span>-cristobalite. Let's see if the structure matcher agrees. Please retreive the structure for <code>mp-546794</code> and then compare it with our prototype structure.</p> </div> </div> <p><em>Hint: No need to re-initialize the structure matcher. Just call it's <code>fit</code> function again.</em> </div> </div></p> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Your code here</span>
<span class=k>with</span> <span class=n>MPRester</span><span class=p>(</span><span class=s2>&quot;9LO7vrUFbVTMaxdK&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>mpr</span><span class=p>:</span>
    <span class=n>bc_structure</span> <span class=o>=</span> <span class=n>mpr</span><span class=o>.</span><span class=n>get_structure_by_material_id</span><span class=p>(</span><span class=s2>&quot;mp-546794&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>comparison_engine</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>bc_structure</span><span class=p>,</span> <span class=n>ac_structure</span><span class=p>))</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>True
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> Just to make sure we haven't increased the tolerances too much, please try it against a random compound to make sure it's not matching dissimilar structures.</p> </div> </div> <p><em>Hint: "mp-4991" is a good random MPID you can use</em> </div> </div></p> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Your code here</span>
<span class=c1># Your code here</span>
<span class=k>with</span> <span class=n>MPRester</span><span class=p>(</span><span class=s2>&quot;9LO7vrUFbVTMaxdK&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>mpr</span><span class=p>:</span>
    <span class=n>bc_structure</span> <span class=o>=</span> <span class=n>mpr</span><span class=o>.</span><span class=n>get_structure_by_material_id</span><span class=p>(</span><span class=s2>&quot;mp-4991&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>comparison_engine</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>bc_structure</span><span class=p>,</span> <span class=n>ac_structure</span><span class=p>))</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>False
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h2 id=step-3-get-a-set-of-candidate-structures-to-compare>Step 3: Get a set of candidate structures to compare<a class=headerlink href=#step-3-get-a-set-of-candidate-structures-to-compare title="Permanent link">&para;</a></h2> </div> </div> <p>Now that we have our comparator, we need some candidates to screen! </p> <p>Imagine that we have an experimental colleague, Soren Tsarpinski, who is an expert at synthesizing vanadate compounds. We have a hunch that some of the vanadates coming out of Dr. Tsarpinski's lab might have similar structures to <span><span class=MathJax_Preview>\alpha</span><script type=math/tex>\alpha</script></span>-cristobalite and therefore might have negative Poisson's ratios. Let's see if we're right:</p> <p>For our search, we want to start with a set of structures that are: * Computationally tractable, so not too many sites (i.e <code>nsites</code> &lt;50 is a good number) * Not too unlikely to be synthesizable (energy above hull &lt;100 meV, i.e. <code>{e_above_hull: {"$lt": 0.1}</code>) * Have a "vanadate" composition, i.e. <code>"*V3O8"</code></p> <p>Construct and execute a query to get the structure, MPID, and pretty_formula for all materials that match these criteria:</p> <p><em>Aside; Soren Tsarpinski is an anagram. There is a prize for the first workshop atendee that can guess the original phrase it comes from. (Submit your anwswers on Slack, please.)</em> </div> </div></p> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Your code here</span>
<span class=k>with</span> <span class=n>MPRester</span><span class=p>(</span><span class=s2>&quot;9LO7vrUFbVTMaxdK&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>mpr</span><span class=p>:</span>
    <span class=n>vanadate_ids</span> <span class=o>=</span> <span class=p>[</span><span class=n>entry</span><span class=p>[</span><span class=s2>&quot;material_id&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>entry</span> <span class=ow>in</span> <span class=n>mpr</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s1>&#39;*V3O8&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s2>&quot;material_id&quot;</span><span class=p>])]</span>
    <span class=n>vanadates</span> <span class=o>=</span> <span class=n>mpr</span><span class=o>.</span><span class=n>query</span><span class=p>({</span><span class=s2>&quot;material_id&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;$in&quot;</span><span class=p>:</span> <span class=n>vanadate_ids</span><span class=p>},</span> 
                          <span class=s2>&quot;e_above_hull&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;$lt&quot;</span><span class=p>:</span> <span class=mf>0.1</span><span class=p>},</span> 
                          <span class=s2>&quot;nsites&quot;</span><span class=p>:{</span><span class=s2>&quot;$lt&quot;</span><span class=p>:</span> <span class=mi>50</span><span class=p>}},</span> <span class=p>[</span><span class=s2>&quot;material_id&quot;</span><span class=p>,</span> <span class=s2>&quot;structure&quot;</span><span class=p>])</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stderr output_text"> <pre>
<code>/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for He. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Ne. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Ar. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Rf. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Db. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Sg. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Bh. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Hs. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Mt. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Ds. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Rg. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Cn. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Nh. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Fl. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Mc. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Lv. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Ts. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
/Users/jdagdelen/opt/anaconda3/envs/mp/lib/python3.8/site-packages/pymatgen/core/periodic_table.py:438: UserWarning: No electronegativity for Og. Setting to NaN. This has no physical meaning, and is mainly done to avoid errors caused by the code expecting a float.
  warnings.warn(&#34;No electronegativity for %s. Setting to NaN. &#34;
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h2 id=step-4-screen-the-vanadates-for-similar-structures-to-alphaalpha-cristobalite-and-then-check-if-our-hypothesis-is-valid-by-querying-for-their-poissons-ratios>Step 4: Screen the vanadates for similar structures to <span><span class=MathJax_Preview>\alpha</span><script type=math/tex>\alpha</script></span>-cristobalite and then check if our hypothesis is valid by querying for their Poisson's ratios.<a class=headerlink href=#step-4-screen-the-vanadates-for-similar-structures-to-alphaalpha-cristobalite-and-then-check-if-our-hypothesis-is-valid-by-querying-for-their-poissons-ratios title="Permanent link">&para;</a></h2> </div> </div> <p>Now that we have a list of vanadates, let's screen it for similar structures. After we have the similar structures, make one final query to the Materials API to retrieve the <code>pretty_formula</code> and <code>elasticity.homogenious_poisson</code> property for each one. </p> <p><em>Hint: Create an empty list for matches and then iterate through the vanadate entries with a for loop. If its structure is similar to <span><span class=MathJax_Preview>\alpha</span><script type=math/tex>\alpha</script></span>-cristobalite, append its <code>material_id</code> to a list of matches. After you have a match list, query the Materials API for entries with a <code>material_id</code> that is in your matches list using the <code>$in</code> mongodb operator (e.g <code>{"material_id": {"$in$: matches}}</code>)</em> </div> </div></p> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Your code here</span>
<span class=n>matches</span> <span class=o>=</span> <span class=p>[]</span>
<span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>vanadates</span><span class=p>:</span>
    <span class=k>if</span> <span class=n>comparison_engine</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>ac_structure</span><span class=p>,</span> <span class=n>v</span><span class=p>[</span><span class=s2>&quot;structure&quot;</span><span class=p>]):</span>
        <span class=n>matches</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=s2>&quot;material_id&quot;</span><span class=p>])</span>

<span class=k>with</span> <span class=n>MPRester</span><span class=p>(</span><span class=s2>&quot;9LO7vrUFbVTMaxdK&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>mpr</span><span class=p>:</span>
    <span class=n>elastic_data</span> <span class=o>=</span> <span class=n>mpr</span><span class=o>.</span><span class=n>query</span><span class=p>({</span><span class=s2>&quot;material_id&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;$in&quot;</span><span class=p>:</span> <span class=n>matches</span><span class=p>}},</span> <span class=p>[</span><span class=s1>&#39;material_id&#39;</span><span class=p>,</span> <span class=s1>&#39;pretty_formula&#39;</span><span class=p>,</span> <span class=s1>&#39;elasticity.homogeneous_poisson&#39;</span><span class=p>])</span>

<span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=n>elastic_data</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>{&#39;material_id&#39;: &#39;mp-775001&#39;, &#39;pretty_formula&#39;: &#39;V3FeO8&#39;, &#39;elasticity.homogeneous_poisson&#39;: -0.06}
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> </div> </div> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Built by The Materials Project </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.92ffa368.min.js></script> <script src=../../../assets/javascripts/bundle.5123e3d4.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>